<section class="three-data-pools-use-case">
  <ng-template #viewToggleTpl>
    <button
      type="button"
      class="view-toggle-btn"
      [class.view-toggle-btn--active]="viewMode === 'concept'"
      (click)="setViewMode('concept')"
      [attr.aria-pressed]="viewMode === 'concept'"
      [attr.title]="viewModeConceptLabel"
    >
      {{ viewModeConceptLabel }}
    </button>
    <button
      type="button"
      class="view-toggle-btn"
      [class.view-toggle-btn--active]="viewMode === 'lanes'"
      (click)="setViewMode('lanes')"
      [attr.aria-pressed]="viewMode === 'lanes'"
      [attr.title]="viewModeLanesLabel"
    >
      {{ viewModeLanesLabel }}
    </button>
  </ng-template>
  <header class="three-data-pools-use-case__header">
    <app-use-case-controls
      [steps]="steps"
      [currentStepIndex]="currentStepIndex"
      [zoom]="zoom"
      [minZoom]="minZoom"
      [maxZoom]="maxZoom"
      [showDescription]="showDescription"
      [loopToStart]="loopToStart"
      [isAutoPlaying]="isAutoPlaying"
      [viewToggleTemplate]="viewToggleTpl"
      [getStepTitle]="getStepTitle.bind(this)"
      (prevStep)="prevStep()"
      (nextStep)="nextStep()"
      (goToStep)="goToStep($event)"
      (toggleAutoPlay)="toggleAutoPlay()"
      (toggleLoop)="toggleLoop()"
      (toggleDescription)="toggleDescription()"
      (zoomIn)="zoomIn()"
      (zoomOut)="zoomOut()"
      (resetZoom)="resetZoom()"
    >
      <h2 use-case-title i18n="@@threeDataPoolsUseCaseHeadline">Data Aggregation: Three Data Pools for Reliable KPIs</h2>
    </app-use-case-controls>
  </header>

  <div class="three-data-pools-use-case__content">
    <div class="three-data-pools-use-case__diagram-wrapper">
      <div class="three-data-pools-use-case__diagram" [style.transform]="'scale(' + zoom + ')'">
        <div *ngIf="isLoading" class="three-data-pools-use-case__loading" i18n="@@loadingSvg">Loading SVG...</div>
        <div
          #svgContainer
          *ngIf="!isLoading && svgContent"
          class="three-data-pools-use-case__svg-wrapper"
          [innerHTML]="svgContent"
        ></div>
        <div *ngIf="!isLoading && !svgContent" class="three-data-pools-use-case__loading" i18n="@@svgLoadError">Failed to load SVG.</div>
      </div>
    </div>
  </div>
</section>
