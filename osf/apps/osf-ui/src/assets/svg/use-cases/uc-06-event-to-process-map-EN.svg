<svg xmlns="http://www.w3.org/2000/svg" width="1920" height="1300" viewBox="0 0 1920 1300">
  <defs>
    <!-- Arrow marker for DSP steps -->
    <marker id="arrow-down" markerWidth="12" markerHeight="12" refX="6" refY="6" orient="auto">
      <polygon points="0,0 12,6 0,12" fill="#154194"/>
    </marker>
    <style>
      :root {
        --stroke: #154194;
        --muted: #7a8aa0;
        --bg: #ffffff;
        --panel: #f6f8fb;
        --accent: #7fbf7a;
        /* Use-Case Column Colors (analog zu DSP Layers) */
        --uc-col-dsp-bg: rgba(207, 230, 255, 0.5);
        --uc-col-dsp-border: rgba(22, 65, 148, 0.15);
        --uc-col-sources-bg: #ffffff;
        --uc-col-targets-bg: #ffffff;
        --uc-col-border: rgba(22, 65, 148, 0.1);
        --uc-panel-bg: rgba(241, 243, 247, 0.8);
        --uc-panel-border: rgba(31, 54, 91, 0.12);
      }
      .frame { fill: var(--bg); }
      .panel { fill: var(--panel); stroke: #d7dee8; stroke-width: 2; rx: 18; ry: 18; }
      .panel-dsp { fill: var(--uc-col-dsp-bg); stroke: var(--uc-col-dsp-border); stroke-width: 2; rx: 18; ry: 18; }
      .title { font: 700 56px "Segoe UI", Arial, sans-serif; fill:#1b2b3c; }
      .subtitle { font: 400 24px "Segoe UI", Arial, sans-serif; fill: var(--muted); }
      .h2 { font: 700 26px "Segoe UI", Arial, sans-serif; fill:#1b2b3c; }
      .p { font: 400 20px "Segoe UI", Arial, sans-serif; fill:#1b2b3c; }
      .small { font: 400 18px "Segoe UI", Arial, sans-serif; fill:#1b2b3c; }
      .chipText { font: 400 16px "Segoe UI", Arial, sans-serif; fill:#1b2b3c; }
      .muted { fill: var(--muted); }
      .iconStroke { fill:none; stroke: var(--stroke); stroke-width: 4; stroke-linecap: round; stroke-linejoin: round; }
      .chip { fill:#ffffff; stroke:#d7dee8; stroke-width:2; rx:14; ry:14; }
      .chipCompact { fill:none; stroke:none; }
      .statusDot { r:6; }
      .statusRunning { fill:#4caf50; }
      .statusIdle { fill:#ff9800; }
      .statusFail { fill:#f44336; }
      .badgePass { fill:#e8f5e9; stroke:#4caf50; stroke-width:2; rx:8; ry:8; }
      .badgeFail { fill:#ffebee; stroke:#f44336; stroke-width:2; rx:8; ry:8; }
      .badgeTextPass { fill:#4caf50; font: 400 14px "Segoe UI", Arial, sans-serif; }
      .badgeTextFail { fill:#f44336; font: 400 14px "Segoe UI", Arial, sans-serif; }
      .arrow { fill:none; stroke:#c2cbd8; stroke-width:10; stroke-linecap:round; }
      .stepBox { fill:#ffffff; stroke:#d7dee8; stroke-width:2; rx:16; ry:16; }
      .stepBar { fill:#ffffff; stroke:#d7dee8; stroke-width:2; rx:14; ry:14; }
      .check { fill:#eaf5ea; stroke:#bfe3bf; stroke-width:2; rx:14; ry:14; }
      .hl { filter:none; }
      .dim { opacity:0.28; }
      .hidden { opacity:0; }
    </style>
  </defs>

  <g id="uc06_root">
    <rect class="frame" x="0" y="0" width="1920" height="1300"/>

    <g id="uc06_title">
      <text x="960" y="110" text-anchor="middle" class="title">Interoperability: Event-to-Process Map</text>
    </g>
    <g id="uc06_subtitle">
      <text x="960" y="155" text-anchor="middle" class="subtitle">
        Turn shopfloor events into a process-ready view through normalization and context.
      </text>
    </g>

    <g id="uc06_columns">

      <g id="uc06_col_sources">
        <rect class="panel" x="80" y="220" width="560" height="950"/>
        <text x="120" y="270" class="h2" id="uc06_sources_header">Sources: events &amp; signals</text>

        <g id="uc06_lane_business_context">
          <rect class="stepBox" x="110" y="300" width="500" height="190"/>
          <text x="160" y="320" class="p">Business context (ERP/MES)</text>
          <g id="uc06_lane_business_context_icon" transform="translate(520,318)">
            <rect width="70" height="70" rx="12" ry="12" fill="#ffffff" stroke="#d7dee8" stroke-width="2"/>
            <image href="/assets/svg/business/erp-application.svg" x="10" y="10" width="50" height="50" preserveAspectRatio="xMidYMid meet"/>
          </g>
          <g id="uc06_lane_business_context_events">
            <!-- Production Order und Storage Order nebeneinander in erster Reihe (zweizeilig) -->
            <rect class="chip" x="160" y="340" width="150" height="50"/>
            <text x="170" y="357" class="chipText">Production</text>
            <text x="170" y="377" class="chipText">order</text>
            <image href="/assets/svg/ui/heading-production.svg" x="280" y="350" width="20" height="20" preserveAspectRatio="xMidYMid meet"/>
            <rect class="chip" x="330" y="340" width="150" height="50"/>
            <text x="340" y="357" class="chipText">Storage</text>
            <text x="340" y="377" class="chipText">Order</text>
            <image href="/assets/svg/shopfloor/shared/order-tracking.svg" x="450" y="350" width="20" height="20" preserveAspectRatio="xMidYMid meet"/>
            <!-- Restliche Chips in 2x2 Grid -->
            <rect class="chip" x="160" y="400" width="150" height="30"/>
            <text x="170" y="420" class="chipText">Material</text>
            <image href="/assets/svg/ui/heading-customer-orders.svg" x="280" y="405" width="20" height="20" preserveAspectRatio="xMidYMid meet"/>
            <rect class="chip" x="330" y="400" width="150" height="30"/>
            <text x="340" y="420" class="chipText">Customer</text>
            <image href="/assets/svg/ui/heading-customer-orders.svg" x="450" y="405" width="20" height="20" preserveAspectRatio="xMidYMid meet"/>
            <rect class="chip" x="160" y="440" width="150" height="30"/>
            <text x="170" y="460" class="chipText">Routing</text>
            <image href="/assets/svg/shopfloor/shared/question.svg" x="280" y="445" width="20" height="20" preserveAspectRatio="xMidYMid meet"/>
            <rect class="chip" x="330" y="440" width="150" height="30"/>
            <text x="340" y="460" class="chipText">Operation</text>
            <image href="/assets/svg/shopfloor/shared/order-tracking.svg" x="450" y="445" width="20" height="20" preserveAspectRatio="xMidYMid meet"/>
          </g>
        </g>

        <g id="uc06_lane_machine_station">
          <rect class="stepBox" x="110" y="510" width="500" height="160"/>
          <text x="160" y="540" class="p">Machine / station / device</text>
          <g id="uc06_lane_machine_station_icon" transform="translate(520,528)">
            <rect width="70" height="70" rx="12" ry="12" fill="#ffffff" stroke="#d7dee8" stroke-width="2"/>
            <image href="/assets/svg/shopfloor/stations/drill-station.svg" x="10" y="10" width="50" height="50" preserveAspectRatio="xMidYMid meet"/>
          </g>
          <g id="uc06_lane_machine_station_events">
            <!-- Gruppe 1: Operation (links) - 3-zeilig -->
            <g id="uc06_ev_machine_operation">
              <rect class="chip" x="160" y="600" width="150" height="70"/>
              <text x="170" y="572" class="chipText" font-weight="600">Operation:</text>
              <text x="170" y="607" class="chipText">Start</text>
              <image href="/assets/svg/shopfloor/shared/question.svg" x="220" y="580" width="16" height="16" preserveAspectRatio="xMidYMid meet"/>
              <text x="170" y="617" class="chipText">Stop</text>
              <image href="/assets/svg/shopfloor/shared/stopped-status.svg" x="220" y="600" width="16" height="16" preserveAspectRatio="xMidYMid meet"/>
            </g>
            <!-- Gruppe 2: State (rechts) - 4-zeilig, vertikal vergrößert -->
            <g id="uc06_ev_machine_status">
              <rect class="chip" x="330" y="600" width="150" height="100"/>
              <text x="340" y="572" class="chipText" font-weight="600">State:</text>
              <circle class="statusDot statusRunning" cx="350" cy="600" r="5"/>
              <text x="360" y="607" class="chipText">Running</text>
              <circle class="statusDot statusIdle" cx="350" cy="625" r="5"/>
              <text x="360" y="632" class="chipText">Idle</text>
              <circle class="statusDot statusFail" cx="350" cy="650" r="5"/>
              <text x="360" y="657" class="chipText">Fail</text>
            </g>
          </g>
        </g>

        <g id="uc06_lane_agv_amr">
          <rect class="stepBox" x="110" y="710" width="500" height="130"/>
          <text x="160" y="710" class="p">AGV / system</text>
          <g id="uc06_lane_agv_amr_icon" transform="translate(520,708)">
            <rect width="70" height="70" rx="12" ry="12" fill="#ffffff" stroke="#d7dee8" stroke-width="2"/>
            <image href="/assets/svg/shopfloor/shared/agv-vehicle.svg" x="10" y="10" width="50" height="50" preserveAspectRatio="xMidYMid meet"/>
          </g>
          <g id="uc06_lane_agv_amr_events">
            <rect class="chip" x="160" y="780" width="150" height="30"/>
            <text x="170" y="798" class="chipText" id="uc06_ev_agv_pick">PICK</text>
            <image href="/assets/svg/shopfloor/shared/pick-event.svg" x="280" y="785" width="20" height="20" preserveAspectRatio="xMidYMid meet"/>
            <rect class="chip" x="330" y="780" width="150" height="30"/>
            <text x="340" y="798" class="chipText" id="uc06_ev_agv_transfer">TRANSFER</text>
            <image href="/assets/svg/shopfloor/shared/pass-event.svg" x="450" y="785" width="20" height="20" preserveAspectRatio="xMidYMid meet"/>
            <rect class="chip" x="160" y="780" width="150" height="30"/>
            <text x="170" y="798" class="chipText" id="uc06_ev_agv_drop">DROP</text>
            <image href="/assets/svg/shopfloor/shared/drop-event.svg" x="280" y="785" width="20" height="20" preserveAspectRatio="xMidYMid meet"/>
            <rect class="chip" x="330" y="780" width="150" height="30"/>
            <text x="340" y="798" class="chipText" id="uc06_ev_agv_route">Route</text>
            <image href="/assets/svg/ui/heading-route.svg" x="450" y="785" width="20" height="20" preserveAspectRatio="xMidYMid meet"/>
          </g>
        </g>

        <g id="uc06_lane_quality_aiqs">
          <rect class="stepBox" x="110" y="910" width="500" height="120"/>
          <text x="160" y="940" class="p">Quality (AIQS)</text>
          <g id="uc06_lane_quality_aiqs_icon" transform="translate(520,858)">
            <rect width="70" height="70" rx="12" ry="12" fill="#ffffff" stroke="#d7dee8" stroke-width="2"/>
            <image href="/assets/svg/shopfloor/stations/aiqs-station.svg" x="10" y="10" width="50" height="50" preserveAspectRatio="xMidYMid meet"/>
          </g>
          <g id="uc06_lane_quality_aiqs_events">
            <text x="170" y="880" class="chipText" id="uc06_ev_quality_check">CHECK_QUALITY:</text>
            <rect class="badgePass" x="280" y="910" width="60" height="24"/>
            <text x="310" y="957" text-anchor="middle" class="chipText" fill="#4caf50">Pass</text>
            <rect class="badgeFail" x="350" y="910" width="60" height="24"/>
            <text x="380" y="957" text-anchor="middle" class="chipText" fill="#f44336">Fail</text>
          </g>
        </g>

        <g id="uc06_lane_env_sensors">
          <rect class="stepBox" x="110" y="1010" width="500" height="120"/>
          <text x="160" y="1080" class="p">Environment / sensors</text>
          <g id="uc06_lane_env_sensors_icon" transform="translate(520,988)">
            <rect width="70" height="70" rx="12" ry="12" fill="#ffffff" stroke="#d7dee8" stroke-width="2"/>
            <image href="/assets/svg/ui/heading-sensors.svg" x="10" y="10" width="50" height="50" preserveAspectRatio="xMidYMid meet"/>
          </g>
          <g id="uc06_lane_env_sensors_events">
            <rect class="chip" x="160" y="1080" width="150" height="30"/>
            <text x="170" y="1080" class="chipText" id="uc06_ev_sensor_temperature">Temperature</text>
            <image href="/assets/svg/ui/heading-sensors.svg" x="280" y="1045" width="20" height="20" preserveAspectRatio="xMidYMid meet"/>
            <rect class="chip" x="330" y="1080" width="150" height="30"/>
            <text x="340" y="1080" class="chipText" id="uc06_ev_sensor_energy">Energy</text>
            <image href="/assets/svg/ui/heading-sensors.svg" x="450" y="1045" width="20" height="20" preserveAspectRatio="xMidYMid meet"/>
            <rect class="chip" x="160" y="1080" width="150" height="30"/>
            <text x="170" y="1080" class="chipText" id="uc06_ev_sensor_vibration">Vibration</text>
            <image href="/assets/svg/ui/heading-sensors.svg" x="280" y="1085" width="20" height="20" preserveAspectRatio="xMidYMid meet"/>
            <rect class="chip" x="330" y="1080" width="150" height="30"/>
            <text x="340" y="1080" class="chipText" id="uc06_ev_sensor_pressure">Pressure</text>
            <image href="/assets/svg/ui/heading-sensors.svg" x="450" y="1085" width="20" height="20" preserveAspectRatio="xMidYMid meet"/>
          </g>
        </g>
      </g>

      <g id="uc06_col_dsp">
        <rect class="panel-dsp" x="680" y="220" width="560" height="950"/>
        <text x="720" y="270" class="h2" id="uc06_dsp_header">DSP: Normalize + context + correlate</text>
        <path id="uc06_arrow_sources_to_dsp" class="arrow" d="M640 700 C 660 700, 660 700, 680 700"/>

        <g id="uc06_step_normalize">
          <rect class="stepBox" x="720" y="320" width="480" height="130"/>
          <text x="960" y="370" text-anchor="middle" class="p"><tspan font-weight="700">Normalize</tspan> (semantics &amp; format)</text>
          <text x="960" y="405" text-anchor="middle" class="small muted">Canonicalize events across protocols and data models</text>
        </g>

        <!-- Arrow from Normalize to Enrich -->
        <path class="arrow" d="M 960 450 L 960 480" stroke="#154194" stroke-width="12" stroke-linecap="round" marker-end="url(#arrow-down)"/>

        <g id="uc06_step_enrich">
          <rect class="stepBox" x="720" y="490" width="480" height="130"/>
          <text x="960" y="540" text-anchor="middle" class="p"><tspan font-weight="700">Enrich context</tspan> (order, workpiece, station, time)</text>
          <text x="960" y="600" text-anchor="middle" class="small muted">Link events to process context</text>
        </g>

        <!-- Arrow from Enrich to Correlate -->
        <path class="arrow" d="M 960 610 L 960 640" stroke="#154194" stroke-width="12" stroke-linecap="round" marker-end="url(#arrow-down)"/>

        <g id="uc06_step_correlate">
          <rect class="stepBox" x="720" y="650" width="480" height="130"/>
          <text x="960" y="710" text-anchor="middle" class="p"><tspan font-weight="700">Correlate</tspan> (event chain → process step)</text>
          <text x="960" y="745" text-anchor="middle" class="small muted">Map event chains into interpretable steps</text>
        </g>

        <!-- Summary bars (optisch abgetrennt) -->
        <g id="uc06_bar_process_ready">
          <rect class="stepBar" x="760" y="830" width="400" height="56" fill="#eaf5ea" stroke="#bfe3bf"/>
          <text x="960" y="867" text-anchor="middle" class="p">Events + context = process readiness</text>
        </g>
        <g id="uc06_bar_reusable">
          <rect class="stepBar" x="760" y="920" width="400" height="56"/>
          <text x="960" y="957" text-anchor="middle" class="p">Reusable instead of point-to-point</text>
        </g>
        <g id="uc06_bar_basis">
          <rect class="stepBar" x="760" y="1010" width="400" height="70"/>
          <text x="960" y="1067" text-anchor="middle" class="p">Foundation for traceability, KPIs</text>
          <text x="960" y="1067" text-anchor="middle" class="p">&amp; closed loops</text>
        </g>
      </g>

      <g id="uc06_col_targets">
        <rect class="panel" x="1280" y="220" width="560" height="950"/>
        <text x="1320" y="270" class="h2" id="uc06_targets_header">Process view &amp; target systems</text>

        <g id="uc06_process_view_box">
          <rect class="stepBox" x="1320" y="310" width="480" height="200"/>
          <text x="1560" y="345" text-anchor="middle" class="p" font-weight="700">Event-to-Process Map</text>

          <g id="uc06_process_timeline">
            <line x1="1350" y1="420" x2="1770" y2="420" stroke="#c2cbd8" stroke-width="12" stroke-linecap="round"/>
            <!-- 6 points: first and last near edges (15px), middle 4 equidistant -->
            <!-- Timeline: 1350 to 1770 = 420px width, first at 1365, last at 1755, middle 4 equidistant: 1443, 1521, 1599, 1677 -->
            <circle cx="1365" cy="420" r="10" fill="#7fbf7a"/>
            <circle cx="1443" cy="420" r="10" fill="#7fbf7a"/>
            <circle cx="1521" cy="420" r="10" fill="#7fbf7a"/>
            <circle cx="1599" cy="420" r="10" fill="#7fbf7a"/>
            <circle cx="1677" cy="420" r="10" fill="#7fbf7a"/>
            <circle cx="1755" cy="420" r="10" fill="#7fbf7a"/>
          </g>

          <g id="uc06_process_icons">
            <image href="/assets/svg/shopfloor/stations/hbw-station.svg" x="1347.5" y="365" width="35" height="35" preserveAspectRatio="xMidYMid meet"/>
            <text x="1365" y="460" text-anchor="middle" class="small">Warehouse</text>
            <image href="/assets/svg/shopfloor/shared/agv-vehicle.svg" x="1425.5" y="365" width="35" height="35" preserveAspectRatio="xMidYMid meet"/>
            <text x="1443" y="460" text-anchor="middle" class="small">AGV</text>
            <image href="/assets/svg/shopfloor/stations/drill-station.svg" x="1503.5" y="365" width="35" height="35" preserveAspectRatio="xMidYMid meet"/>
            <text x="1521" y="460" text-anchor="middle" class="small">Station</text>
            <image href="/assets/svg/shopfloor/shared/pick-event.svg" x="1581.5" y="365" width="35" height="35" preserveAspectRatio="xMidYMid meet"/>
            <text x="1599" y="460" text-anchor="middle" class="small">Transfer</text>
            <image href="/assets/svg/shopfloor/stations/aiqs-station.svg" x="1659.5" y="365" width="35" height="35" preserveAspectRatio="xMidYMid meet"/>
            <text x="1677" y="460" text-anchor="middle" class="small">Quality</text>
            <image href="/assets/svg/shopfloor/shared/order-tracking.svg" x="1737.5" y="365" width="35" height="35" preserveAspectRatio="xMidYMid meet"/>
            <text x="1755" y="460" text-anchor="middle" class="small">Complete</text>
          </g>
        </g>

        <g id="uc06_targets_systems">
          <g id="uc06_target_erp">
            <rect class="stepBox" x="1320" y="540" width="150" height="100"/>
            <image href="/assets/svg/business/erp-application.svg" x="1365" y="600" width="70" height="50" preserveAspectRatio="xMidYMid meet"/>
            <text x="1395" y="625" text-anchor="middle" class="p">ERP</text>
          </g>
          <g id="uc06_target_mes">
            <rect class="stepBox" x="1495" y="540" width="150" height="100"/>
            <image href="/assets/svg/business/mes-application.svg" x="1540" y="600" width="70" height="50" preserveAspectRatio="xMidYMid meet"/>
            <text x="1570" y="625" text-anchor="middle" class="p">MES</text>
          </g>
          <g id="uc06_target_analytics_ai">
            <rect class="stepBox" x="1670" y="540" width="150" height="100"/>
            <image href="/assets/svg/business/analytics-application.svg" x="1715" y="600" width="70" height="50" preserveAspectRatio="xMidYMid meet"/>
            <text x="1745" y="625" text-anchor="middle" class="p">Analytics / AI</text>
          </g>
          <text id="uc06_target_note_best_of_breed" x="1320" y="650" class="small muted">
            Best-of-breed: SAP may be an example, but it is not a prerequisite.
          </text>
        </g>

        <g id="uc06_outcomes">
          <g id="uc06_outcome_traceability">
            <rect class="check" x="1320" y="720" width="480" height="70"/>
            <text x="1380" y="745" class="p">Traceability / genealogy</text>
          </g>
          <g id="uc06_outcome_kpi">
            <rect class="check" x="1320" y="780" width="480" height="80"/>
            <text x="1380" y="875" class="p">KPI calculation</text>
            <text x="1380" y="985" class="p">(lead time, downtime, OEE building blocks)</text>
          </g>
          <g id="uc06_outcome_closed_loop">
            <rect class="check" x="1320" y="940" width="480" height="70"/>
            <text x="1380" y="985" class="p">Closed-loop orchestration</text>
          </g>
        </g>
      </g>
    </g>

    <g id="uc06_footer">
      <text x="960" y="1250" text-anchor="middle" class="subtitle">
        Combines events from machines, AGVs, quality, and business context into one shared process view.
      </text>
    </g>
  </g>
</svg>
