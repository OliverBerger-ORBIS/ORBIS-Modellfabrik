<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>OMF3 Dashboard</title>
    <script type="text/javascript">
      // Redirect to base path with hash routing
      // With HashLocationStrategy, all routes are client-side
      var l = window.location;
      
      // Detect if running on GitHub Pages or locally
      var isGitHubPages = l.hostname === 'oliverberger-orbis.github.io';
      var basePath = isGitHubPages ? '/ORBIS-Modellfabrik/' : '/';
      
      // Remove /en/ prefix if present (GitHub Pages i18n routing issue)
      var pathname = l.pathname;
      var hasEnPrefix = false;
      if (isGitHubPages && pathname.startsWith('/en/')) {
        pathname = pathname.replace('/en/', '/');
        hasEnPrefix = true;
      }
      
      // Check if we need to redirect
      var needsRedirect = false;
      var targetHash = l.hash || '#/en/overview';
      
      if (isGitHubPages) {
        // GitHub Pages: Always redirect if /en/ prefix was found
        if (hasEnPrefix) {
          needsRedirect = true;
        } else if (!pathname.startsWith(basePath)) {
          needsRedirect = true;
        } else if (!l.hash || l.hash === '') {
          needsRedirect = true;
        }
      } else {
        // Local dev: Only redirect if not on root or missing hash
        if (l.pathname !== '/' || !l.hash || l.hash === '') {
          needsRedirect = true;
        }
      }
      
      if (needsRedirect) {
        l.replace(l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') + basePath + targetHash);
      }
    </script>
  </head>
  <body>
    <p>Redirecting...</p>
  </body>
</html>
