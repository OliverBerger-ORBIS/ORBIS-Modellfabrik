<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>OMF3 Dashboard</title>
    <script type="text/javascript">
      // Redirect to base path with hash routing
      // With HashLocationStrategy, all routes are client-side
      var l = window.location;
      
      // Detect if running on GitHub Pages or locally
      var isGitHubPages = l.hostname === 'oliverberger-orbis.github.io';
      var basePath = isGitHubPages ? '/ORBIS-Modellfabrik/' : '/';
      
      // Get current pathname and hash
      var pathname = l.pathname;
      var hash = l.hash || '#/en/overview';
      
      // Remove /en/ prefix if present in pathname (GitHub Pages i18n routing issue)
      var hasEnPrefix = false;
      if (isGitHubPages && pathname.startsWith('/en/')) {
        pathname = pathname.replace('/en/', '/');
        hasEnPrefix = true;
      }
      
      // Check if we need to redirect
      var needsRedirect = false;
      
      if (isGitHubPages) {
        // GitHub Pages: Redirect if:
        // 1. /en/ prefix was found in pathname
        // 2. pathname doesn't start with basePath
        // 3. pathname is exactly basePath but hash is missing
        if (hasEnPrefix) {
          needsRedirect = true;
        } else if (!pathname.startsWith(basePath)) {
          needsRedirect = true;
        } else if (pathname === basePath && (!l.hash || l.hash === '')) {
          needsRedirect = true;
        }
      } else {
        // Local dev: Only redirect if not on root or missing hash
        if (l.pathname !== '/' || !l.hash || l.hash === '') {
          needsRedirect = true;
        }
      }
      
      if (needsRedirect) {
        // Construct correct URL: protocol + hostname + port + basePath + hash
        var newUrl = l.protocol + '//' + l.hostname;
        if (l.port) {
          newUrl += ':' + l.port;
        }
        newUrl += basePath + hash;
        l.replace(newUrl);
      }
    </script>
  </head>
  <body>
    <p>Redirecting...</p>
  </body>
</html>
