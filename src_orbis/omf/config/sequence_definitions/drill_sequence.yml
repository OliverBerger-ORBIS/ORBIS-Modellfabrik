context:
  module_serial: SVR4H76449
  module_type: DRILL
description: 'Komplette DRILL-Sequenz: PICK → DRILL → DROP'
name: drill_complete_sequence
steps:
- name: PICK
  payload:
    serialNumber: '{{module_serial}}'
    orderId: '{{orderId}}'
    orderUpdateId: '{{orderUpdateId}}'
    action:
      id: '{{action_id}}'
      command: PICK
      metadata:
        priority: NORMAL
        timeout: 300
        type: WHITE
  topic: module/v1/ff/{{module_serial}}/order
  wait_condition:
    payload_contains:
      actionState: IDLE
    topic: module/v1/ff/{{module_serial}}/state
- name: DRILL
  payload:
    serialNumber: '{{module_serial}}'
    orderId: '{{orderId}}'
    orderUpdateId: '{{orderUpdateId}}'
    action:
      id: '{{action_id}}'
      command: DRILL
      metadata:
        priority: NORMAL
        timeout: 300
        type: WHITE
  topic: module/v1/ff/{{module_serial}}/order
  wait_condition:
    payload_contains:
      actionState: IDLE
    topic: module/v1/ff/{{module_serial}}/state
- name: DROP
  payload:
    serialNumber: '{{module_serial}}'
    orderId: '{{orderId}}'
    orderUpdateId: '{{orderUpdateId}}'
    action:
      id: '{{action_id}}'
      command: DROP
      metadata:
        priority: NORMAL
        timeout: 300
        type: WHITE
  topic: module/v1/ff/{{module_serial}}/order
