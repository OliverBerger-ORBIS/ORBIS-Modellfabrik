metadata:
  version: 2.1.0
  last_updated: '2025-10-09'
  author: OMF Development Team
  description: CCU Topics mit QoS/Retain und Publisher/Subscriber-Mapping (erweitert mit Session-Analyse)
category: ccu
ccu_topics:
- topic: ccu/order/request
  qos: 2
  retain: 0
  schema: ccu_order_request.schema.json
  description: "Production Order Request - PRIMARY trigger for order workflow"
  assumption: TODO
  # APS as-IS Observation:
  observed_publisher_aps: "APS-Dashboard Frontend (MQTT-Browser) or CCU-Backend Gateway Module"
  observed_subscriber_aps: "CCU-Backend (Order Module - handleMessage)"
  # OMF2 Guidance (manual configuration):
  semantic_role: order_trigger_primary
  triggers: production_order_workflow
  omf2_usage: "OrderManager → subscribe to detect new orders (PRIMARY trigger, REQUIRED)"
  omf2_note: "This is the REQUIRED trigger - /j1/txt/1/f/o/order is optional alternative"
  # Verification:
  verified: true
  data_source: "Session orderBlueLocal_orderRedCloud - 2 messages (BLUE, RED), Code: modules/order/index.js"
  analysis_note: "Identical timestamp with /j1/txt/1/f/o/order - Frontend sends both (Fan-Out)"
- topic: ccu/order/response
  qos: 2
  retain: 0
  schema: ccu_order_response.schema.json
  description: "Order Response - Confirms order creation with generated UUID"
  assumption: TODO
  # APS as-IS Observation:
  observed_publisher_aps: "CCU-Backend (Order Module - sendResponse)"
  observed_subscriber_aps: "APS-Dashboard Frontend, Monitoring Systems"
  # OMF2 Guidance (manual configuration):
  semantic_role: order_confirmation
  triggers: null
  omf2_usage: "OrderManager → publish order confirmation after UUID generation"
  # Verification:
  verified: true
  data_source: "Session orderBlueLocal_orderRedCloud - 2 messages (BLUE, RED confirmations), Code: modules/order/index.js"
  analysis_note: "Contains generated orderId (UUID), state: IN_PROGRESS, productionSteps array"
- topic: ccu/state
  qos: 1
  retain: 0
  schema: wildcard.schema.json
  description: TODO
- topic: ccu/state/flow
  qos: 1
  retain: 0
  schema: wildcard.schema.json
  description: TODO
- topic: ccu/state/status
  qos: 1
  retain: 0
  schema: wildcard.schema.json
  description: TODO
- topic: ccu/state/error
  qos: 1
  retain: 0
  schema: wildcard.schema.json
  description: TODO
- topic: ccu/state/stock
  qos: 1
  retain: 0
  schema: ccu_state_stock.schema.json
  description: "Stock-Status - HBW Inventory State (synced with /j1/txt/1/f/i/stock)"
  assumption: TODO
  # APS as-IS Observation:
  observed_publisher_aps: "CCU-Backend (Stock Management)"
  observed_subscriber_aps: "Dashboards, Monitoring Systems"
  # OMF2 Guidance (manual configuration):
  semantic_role: stock_state
  triggers: null
  omf2_usage: "StockManager → publish stock updates for dashboards"
  # Verification:
  verified: true
  data_source: "Session orderBlueLocal_orderRedCloud - 10 messages"
- topic: ccu/state/version-mismatch
  qos: 2
  retain: 1
  schema: ccu_state_version-mismatch.schema.json
  description: "mismatchedModules List: leeres Array wenn keine Versionen nicht übereinstimmen"
- topic: ccu/state/layout
  qos: 1
  retain: 1
  schema: ccu_state_layout.schema.json
  description: "modules, intersections, roads (from-to), ff-cc-data:factory_layout.json -> shopfloor-layout"
- topic: ccu/state/config
  qos: 1
  retain: 1
  schema: ccu_state_config.schema.json
  description: "productionDurations, productionSettings, ftsSettings, ff-cc-data:general-config.json -> Allg-APS-config"
- topic: ccu/state/flows
  qos: 1
  retain: 1
  schema: ccu_state_flows.schema.json
  description: "BLUE, RED, WHITE, ff-cc-data:factory-flows.json ->Produktion-Plan"
- topic: ccu/control
  qos: 1
  retain: 0
  schema: wildcard.schema.json
  description: TODO
- topic: ccu/control/command
  qos: 1
  retain: 0
  schema: wildcard.schema.json
  description: TODO
- topic: ccu/control/order
  qos: 1
  retain: 0
  schema: wildcard.schema.json
  description: TODO
- topic: ccu/set/reset
  qos: 2
  retain: 0
  schema: ccu_set_reset.schema.json
  description: TODO
- topic: ccu/global
  qos: 2
  retain: 0
  schema: wildcard.schema.json
  description: TODO
- topic: ccu/status
  qos: 1
  retain: 1
  schema: wildcard.schema.json
  description: TODO
- topic: ccu/status/connection
  qos: 1
  retain: 1
  schema: wildcard.schema.json
  description: TODO
- topic: ccu/status/health
  qos: 1
  retain: 1
  schema: wildcard.schema.json
  description: TODO
- topic: ccu/pairing/state
  qos: 2
  retain: 1
  schema: ccu_pairing_state.schema.json
  description: "Pairing-Status - Module und FTS Availability/Connection State"
  assumption: "Zsf modules connected false, available BLOCKED, transports connected true available BLOCKED"
  # APS as-IS Observation:
  observed_publisher_aps: "CCU-Backend (Pairing Module - publishPairingState)"
  observed_subscriber_aps: "Dashboards, FTS, Modules"
  # OMF2 Guidance (manual configuration):
  semantic_role: system_availability_state
  triggers: null
  omf2_usage: "PairingManager → publish module/FTS availability (high frequency)"
  # Verification:
  verified: true
  data_source: "Session orderBlueLocal_orderRedCloud - 79 messages (most frequent CCU topic)"
- topic: ccu/order/active
  qos: 2
  retain: 1
  schema: ccu_order_active.schema.json
  description: "Active Orders List - Array of currently active/queued orders"
  assumption: "kann leer sein, wenn keine aktive Bestellung vorhanden ist"
  # APS as-IS Observation:
  observed_publisher_aps: "CCU-Backend (Order Management - sendOrderListUpdate)"
  observed_subscriber_aps: "Dashboards, Monitoring Systems, TXT-Display"
  # OMF2 Guidance (manual configuration):
  semantic_role: order_queue_state
  triggers: null
  omf2_usage: "OrderManager → publish active orders array (updated on order changes)"
  # Verification:
  verified: true
  data_source: "Session orderBlueLocal_orderRedCloud - 8 messages (order queue updates)"
- topic: ccu/order/completed
  qos: 2
  retain: 1
  schema: ccu_order_completed.schema.json
  description: "Completed Orders List - Array of finished orders"
  assumption: "kann leer sein, wenn keine abgeschlossene Bestellung vorhanden ist"
  # APS as-IS Observation:
  observed_publisher_aps: "CCU-Backend (Order Management - sendCompletedOrderListUpdate)"
  observed_subscriber_aps: "Dashboards, Monitoring Systems, Analytics"
  # OMF2 Guidance (manual configuration):
  semantic_role: order_completion_log
  triggers: null
  omf2_usage: "OrderManager → publish completed orders (retained for history)"
  # Verification:
  verified: true
  data_source: "Session orderBlueLocal_orderRedCloud - 2 messages (order completions)"
- topic: ccu/set/charge
  qos: 1
  retain: 0
  schema: ccu_set_charge.schema.json
  description: TODO
- topic: ccu/set/layout
  qos: 1
  retain: 0
  schema: wildcard.schema.json
  description: TODO
- topic: ccu/set/flows
  qos: 1
  retain: 0
  schema: wildcard.schema.json
  description: TODO
- topic: ccu/set/calibration
  qos: 1
  retain: 0
  schema: ccu_set_calibration.schema.json
  description: TODO
- topic: ccu/set/park
  qos: 1
  retain: 0
  schema: wildcard.schema.json
  description: TODO
- topic: ccu/set/delete-module
  qos: 1
  retain: 0
  schema: wildcard.schema.json
  description: TODO
- topic: ccu/set/module-duration
  qos: 1
  retain: 0
  schema: wildcard.schema.json
  description: TODO
- topic: ccu/set/default_layout
  qos: 1
  retain: 0
  schema: wildcard.schema.json
  description: TODO
- topic: ccu/set/config
  qos: 1
  retain: 0
  schema: wildcard.schema.json
  description: TODO