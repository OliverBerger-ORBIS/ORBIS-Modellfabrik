version: 1.0.0
metadata:
  category: CCU
  sub_category: State
  description: CCU Layout State (topic-free; topics live in mapping.yml)
  icon: "ðŸ“Š"
  last_updated: "2025-09-14"

templates:

  ccu.state.layout:
    description: Fabrik-Layout (Knoten/Wege)
    match: { }
    template_structure:
      intersections:
        type: array
        items: { type: object, properties: { id: { type: string } } }
      roads:
        type: array
        items: { type: object, properties: { from: {type: string}, to: {type: string}, direction: {type: string}, length: {type: integer} } }
      modules:
        type: array
        items: { type: object, properties: { serialNumber: {type: string}, type: {type: string} , placeholder: {type: boolean} } }
    examples:
      - payload:
          intersections: [{id:"1"}, {id:"2"}, {id:"3"}, {id:"4"}]
          roads: 
            - {from:"1",to:"2",direction:"EAST",length:360}
            - {from:"3",to:"1",direction:"NORTH",length:360}
            - {from:"3",to:"4",direction:"EAST",length:360}
            - {from:"4",to:"2",direction:"NORTH",length:360}
          modules: 
            - {serialNumber:"SVR3QA0022", type:"HBW", placeholder:false}
            - {serialNumber:"SVR4H76449", type:"DRILL", placeholder:false}
            - {serialNumber:"SVR3QA2098", type:"MILL", placeholder:false}
            - {serialNumber:"SVR4H73275", type:"DPS", placeholder:false}
            - {serialNumber:"SVR4H76530", type:"AIQS", placeholder:false}
            - {serialNumber:"CHRG0", type:"CHRG", placeholder:false}
