metadata:
  category: FTS
  sub_category: State
  description: FTS State Templates
  icon: ðŸš›
  version: 1.0.0
  last_updated: '2025-01-15'

templates:
  fts.state:
    category: FTS
    sub_category: State
    description: FTS State Information
    direction: inbound    structure:
      lastNodeId: "<string>"
      driving: "<boolean>"
      paused: "<boolean>"
      batteryState: "<object>"
      load: "<object>"
      actionState: "<object>"
      errors: "<array>"
      waitingForLoadHandling: "<boolean>"
      timestamp: "<datetime>"
    examples:
      - lastNodeId: "SVR3QA0022"
        driving: false
        paused: false
        batteryState:
          batteryPercentage: 84
          batteryVoltage: 8.9
          charging: false
        load:
          loadHandling:
            loaded: true
            loadPositions:
              "1":
                loadId: "040a8dca341291"
                loadType: "RED"
        actionState:
          command: "DOCK"
          state: "FINISHED"
          id: "some-action-id"
          timestamp: "2025-08-19T09:18:14.861Z"
        errors: []
        waitingForLoadHandling: false
        timestamp: "2025-08-19T09:18:14.861Z"
      - lastNodeId: "SVR4H73275"
        driving: true
        paused: false
        batteryState:
          batteryPercentage: 78
          batteryVoltage: 8.7
          charging: false
        load:
          loadHandling:
            loaded: false
            loadPositions: {}
        actionState:
          command: "TURN"
          state: "RUNNING"
          id: "turn-action-id"
          timestamp: "2025-08-19T09:17:45.123Z"
        errors: []
        waitingForLoadHandling: false
        timestamp: "2025-08-19T09:17:45.123Z"
    validation:
      required_fields: ["lastNodeId", "driving", "paused", "batteryState", "load", "actionState", "errors", "waitingForLoadHandling", "timestamp"]
      state_values: ["RUNNING", "FINISHED", "WAITING", "FAILED"]
      connectionState_values: ["ONLINE", "OFFLINE", "CONNECTING", "DISCONNECTED"]
    match:
      required_fields: ["lastNodeId", "driving", "paused", "batteryState", "load", "actionState", "errors", "waitingForLoadHandling", "timestamp"]
    friendly_name: "FTS : state"
