version: 1.0.0
metadata: { category: MODULE, sub_category: State, description: "DRILL State" }
templates:
  module.state.drill:
    description: "Bohrstation Status + aktuelle Aktion"
    match:
      required_fields: [timestamp, serialNumber]
    template_structure:
      serialNumber: { type: string }
      actionState:
        type: object
        required: false
        properties:
          id: { type: string }
          command: { type: string, enum: ["PICK","DRILL","DROP"] }
          duration: { type: integer, minimum: 1, maximum: 3600, required: false }
          state: { type: string, enum: ["RUNNING","FINISHED"] }
      loads:
        type: array
        required: false
        items:
          type: object
          properties:
            loadType: { type: string, enum: ["RED","WHITE","BLUE"] }
            duration: { type: integer, required: false }
      metadata: { type: object, properties: { opcuaState: { type: string } } }
      orderId: { type: string }
      orderUpdateId: { type: integer, minimum: 0 }
      paused: { type: boolean }
      errors: { type: array, items: { type: object } }
      headerId: { type: integer }
      timestamp: { type: string, format: date-time }
