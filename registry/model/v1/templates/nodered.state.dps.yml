metadata:
  category: Node-RED
  sub_category: State
  description: Node-RED DPS State Templates
  icon: ðŸ“Š
  version: 1.0.0
  last_updated: '2025-01-15'

templates:
  nodered.state.dps:
    category: Node-RED
    sub_category: State
    description: Node-RED DPS State Information
    direction: inbound    structure:
      actionState: "<object>"
      actionStates: "<array>"
      batteryState: "<object>"
      errors: "<array>"
      headerId: "<number>"
      information: "<array>"
      operatingMode: "<string>"
      orderId: "<string>"
      orderUpdateId: "<number>"
      paused: "<boolean>"
      serialNumber: "<string>"
      timestamp: "<datetime>"
    examples:
      - actionState:
          command: "PICK"
          id: "327784cd-6abc-4a0b-870e-713694fdb1dd"
          result: "PASSED"
          state: "FINISHED"
          timestamp: "2025-08-19T09:19:03.473043Z"
        actionStates:
          - command: "PICK"
            id: "327784cd-6abc-4a0b-870e-713694fdb1dd"
            metadata:
              workpiece:
                history:
                  - code: 400
                    ts: 1755595028336
                  - code: 600
                    ts: 1755595064912
                  - code: 200
                    ts: 1755595103032
                state: "PROCESSED"
                type: "RED"
                workpieceId: "040a8dca341291"
            result: "PASSED"
            state: "FINISHED"
            timestamp: "2025-08-19T09:19:03.473043Z"
        batteryState: {}
        errors: []
        headerId: 15
        information: []
        operatingMode: "AUTOMATIC"
        orderId: "8ae07a6e-d058-48de-9b4d-8d0176622abc"
        orderUpdateId: 11
        paused: false
        serialNumber: "SVR4H73275"
        timestamp: "2025-08-19T09:19:03.477244Z"
      - actionState:
          command: "PICK"
          id: "327784cd-6abc-4a0b-870e-713694fdb1dd"
          state: "RUNNING"
          timestamp: "2025-08-19T09:18:41.734745Z"
        actionStates:
          - command: "PICK"
            id: "327784cd-6abc-4a0b-870e-713694fdb1dd"
            metadata:
              workpiece:
                history:
                  - code: 400
                    ts: 1755595028336
                  - code: 600
                    ts: 1755595064912
                  - code: 200
                    ts: 1755595103032
                state: "PROCESSED"
                type: "RED"
                workpieceId: "040a8dca341291"
            state: "RUNNING"
            timestamp: "2025-08-19T09:18:41.734745Z"
        batteryState: {}
        errors: []
        headerId: 14
        information: []
        operatingMode: "AUTOMATIC"
        orderId: "8ae07a6e-d058-48de-9b4d-8d0176622abc"
        orderUpdateId: 11
        paused: false
        serialNumber: "SVR4H73275"
        timestamp: "2025-08-19T09:18:41.735070Z"
    validation:
      required_fields: ["actionState", "actionStates", "batteryState", "errors", "headerId", "information", "operatingMode", "orderId", "orderUpdateId", "paused", "serialNumber", "timestamp"]
      operatingMode_values: ["AUTOMATIC"]
      paused_values: [false]
      serialNumber_values: ["SVR4H73275"]
      batteryState_values: [{}]
      information_values: [[]]
      errors_values: [[]]
    match:
      required_fields: ["actionState", "actionStates", "batteryState", "errors", "headerId", "information", "operatingMode", "orderId", "orderUpdateId", "paused", "serialNumber", "timestamp"]
    friendly_name: "NodeRed â†’ DPS : state"
