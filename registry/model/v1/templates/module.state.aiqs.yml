version: 1.0.0
metadata: { category: MODULE, sub_category: State, description: "AIQS State" }
templates:
  module.state.aiqs:
    description: "Qualitätsprüfung inkl. CHECK_QUALITY"
    match:
      required_fields: [timestamp, serialNumber]
    template_structure:
      serialNumber: { type: string }
      actionState:
        type: object
        required: false
        properties:
          id: { type: string }
          command: { type: string, enum: ["PICK","CHECK_QUALITY","DROP"] }
          state: { type: string, enum: ["RUNNING","FINISHED"] }
          result: { type: string, enum: ["PASSED","FAILED"], required: false }
          metadata:
            type: object
            properties:
              type: { type: string, enum: ["RED","WHITE","BLUE"] }
              workpieceId: { type: string }
      loads:
        type: array
        required: false
        items:
          type: object
          properties:
            loadType: { type: string, enum: ["RED","WHITE","BLUE"] }
      metadata: { type: object, properties: { opcuaState: { type: string } } }
      orderId: { type: string }
      orderUpdateId: { type: integer, minimum: 0 }
      paused: { type: boolean }
      errors: { type: array, items: { type: object } }
      headerId: { type: integer }
      timestamp: { type: string, format: date-time }
