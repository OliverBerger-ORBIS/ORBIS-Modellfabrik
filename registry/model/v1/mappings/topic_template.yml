version: 1.0.0
resolution_order: ["exact","pattern"]

mappings:
  # CCU (exakt)
  - { topic: "ccu/control",        template: "ccu/control",        direction: outbound }
  - { topic: "ccu/state/status",   template: "ccu.state.status",   direction: inbound }
  - { topic: "ccu/pairing/state",  template: "ccu.state.pairing",  direction: inbound }
  - { topic: "ccu/state/config",   template: "ccu.state.config",   direction: inbound }
  - { topic: "ccu/state/layout",   template: "ccu.state.layout",   direction: inbound }
  - { topic: "ccu/state/stock",    template: "ccu.state.stock",    direction: inbound }
  - { topic: "ccu/state/version-mismatch", template: "ccu.state.version_mismatch", direction: inbound }

  # Module State (exakt - spezifische Serial Numbers)
  # HBW
  - { topic: "module/v1/ff/SVR3QA0022/state", template: "module.state.hbw_inventory", direction: inbound, meta: { category: "MODULE", sub_category: "State", friendly_name: "HBW : state" } }
  
  # MILL
  - { topic: "module/v1/ff/SVR3QA2098/state", template: "module.state.mill", direction: inbound, meta: { category: "MODULE", sub_category: "State", friendly_name: "MILL : state" } }
  
  # DRILL
  - { topic: "module/v1/ff/SVR4H76449/state", template: "module.state.drill", direction: inbound, meta: { category: "MODULE", sub_category: "State", friendly_name: "DRILL : state" } }
  
  # DPS
  - { topic: "module/v1/ff/SVR4H73275/state", template: "module.state.dps", direction: inbound, meta: { category: "MODULE", sub_category: "State", friendly_name: "DPS : state" } }
  
  # AIQS
  - { topic: "module/v1/ff/SVR4H76530/state", template: "module.state.aiqs", direction: inbound, meta: { category: "MODULE", sub_category: "State", friendly_name: "AIQS : state" } }

  # Module (pattern - generisch)
  - { pattern: "module/v1/ff/{module_id}/connection", template: "module/connection", direction: bidirectional, vars: { module_id: "<serial>" } }
  - { pattern: "module/v1/ff/{module_id}/state",      template: "module/state",      direction: inbound,       vars: { module_id: "<serial>" } }
  - { pattern: "module/v1/ff/{module_id}/order",      template: "module/order",      direction: outbound,      vars: { module_id: "<serial>" } }
  - { pattern: "module/v1/ff/{module_id}/factsheet",  template: "module/factsheet",  direction: inbound,       vars: { module_id: "<serial>" } }

  # TXT Controller #1 (exakt)
  - { topic: "/j1/txt/1/f/i/order", template: "txt/controller1/order_input", direction: inbound, meta: { category: "TXT", sub_category: "Order_Input", friendly_name: "TXT Controller #1 : order input" } }
  - { topic: "/j1/txt/1/f/i/stock", template: "txt/controller1/stock_input", direction: inbound, meta: { category: "TXT", sub_category: "Stock_Input", friendly_name: "TXT Controller #1 : stock input" } }
  - { topic: "/j1/txt/1/i/bme680", template: "/j1/txt/1/i/bme680", direction: inbound, meta: { category: "TXT", sub_category: "Function_Input", friendly_name: "TXT Controller #1 : BME680 sensor data" } }
  - { topic: "/j1/txt/1/i/broadcast", template: "/j1/txt/1/i/broadcast", direction: inbound, meta: { category: "TXT", sub_category: "Function_Input", friendly_name: "TXT Controller #1 : broadcast messages" } }
  - { topic: "/j1/txt/1/i/cam", template: "/j1/txt/1/i/cam", direction: inbound, meta: { category: "TXT", sub_category: "Function_Input", friendly_name: "TXT Controller #1 : camera data" } }
  - { topic: "/j1/txt/1/i/ldr", template: "/j1/txt/1/i/ldr", direction: inbound, meta: { category: "TXT", sub_category: "Function_Input", friendly_name: "TXT Controller #1 : LDR sensor data" } }
  - { topic: "/j1/txt/1/o/broadcast", template: "/j1/txt/1/o/broadcast", direction: outbound, meta: { category: "TXT", sub_category: "Function_Output", friendly_name: "TXT Controller #1 : broadcast output" } }
  - { topic: "/j1/txt/1/f/i/config/hbw", template: "/j1/txt/1/f/i/config/hbw", direction: inbound, meta: { category: "TXT", sub_category: "Input", friendly_name: "TXT Controller #1 : HBW config input" } }
  - { topic: "/j1/txt/1/f/o/order", template: "/j1/txt/1/f/o/order", direction: outbound, meta: { category: "TXT", sub_category: "Output", friendly_name: "TXT Controller #1 : order output" } }

  # Node-RED (exakt)
  - { topic: "module/v1/ff/NodeRed/SVR4H73275/connection", template: "module/v1/ff/NodeRed/SVR4H73275/connection", direction: inbound, meta: { category: "Node-RED", sub_category: "Connection", friendly_name: "NodeRed → DPS : connection" } }
  - { topic: "module/v1/ff/NodeRed/SVR4H73275/state",      template: "module/v1/ff/NodeRed/SVR4H73275/state",      direction: inbound, meta: { category: "Node-RED", sub_category: "State", friendly_name: "NodeRed → DPS : state" } }
  - { topic: "module/v1/ff/NodeRed/SVR4H73275/factsheet",  template: "module/v1/ff/NodeRed/SVR4H73275/factsheet",  direction: inbound, meta: { category: "Node-RED", sub_category: "Factsheet", friendly_name: "NodeRed → DPS : factsheet" } }
  - { topic: "module/v1/ff/NodeRed/SVR4H76530/connection", template: "module/v1/ff/NodeRed/SVR4H76530/connection", direction: inbound, meta: { category: "Node-RED", sub_category: "Connection", friendly_name: "NodeRed → AIQS : connection" } }
  - { topic: "module/v1/ff/NodeRed/SVR4H76530/state",      template: "module/v1/ff/NodeRed/SVR4H76530/state",      direction: inbound, meta: { category: "Node-RED", sub_category: "State", friendly_name: "NodeRed → AIQS : state" } }
  - { topic: "module/v1/ff/NodeRed/SVR4H76530/factsheet",  template: "module/v1/ff/NodeRed/SVR4H76530/factsheet",  direction: inbound, meta: { category: "Node-RED", sub_category: "Factsheet", friendly_name: "NodeRed → AIQS : factsheet" } }

  # FTS (exakt)
  - { topic: "fts/v1/ff/5iO4/connection", template: "fts/v1/ff/5iO4/connection", direction: bidirectional, meta: { category: "FTS", sub_category: "Connection", friendly_name: "FTS : connection" } }
  - { topic: "fts/v1/ff/5iO4/state",      template: "fts/v1/ff/5iO4/state",      direction: inbound,       meta: { category: "FTS", sub_category: "State", friendly_name: "FTS : state" } }
  - { topic: "fts/v1/ff/5iO4/order",      template: "fts/v1/ff/5iO4/order",      direction: outbound,      meta: { category: "FTS", sub_category: "Order", friendly_name: "FTS : order" } }
  - { topic: "fts/v1/ff/5iO4/factsheet",  template: "fts/v1/ff/5iO4/factsheet",  direction: inbound,       meta: { category: "FTS", sub_category: "Factsheet", friendly_name: "FTS : factsheet" } }
