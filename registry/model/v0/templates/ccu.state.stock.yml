version: 1.0.0
metadata:
  category: CCU
  sub_category: State
  description: CCU Stock State (topic-free; topics live in mapping.yml)
  icon: "ðŸ“Š"
  last_updated: "2025-09-14"

templates:

  ccu.state.stock:
    description: Aggregierter HBW-Bestand (vom CCU-Blick)
    match: { }
    template_structure:
      stockItems:
        type: array
        items:
          type: object
          properties:
            hbw: { type: string }
            location: { type: string }
            workpiece:
              type: object
              properties:
                id: { type: string }
                state: { type: string, enum: ["RAW","RESERVED","IN_PROCESS","COMPLETED","FINISHED"] }
                type: { type: string, enum: ["RED","WHITE","BLUE"] }
      ts: { type: string, format: date-time }
    examples:
      - payload:
          stockItems:
            - { hbw: "SVR3QA0022", location: "A1", workpiece: { id: "040a8dca341291", state: "RAW", type: "RED" } }
            - { hbw: "SVR3QA0022", location: "B1", workpiece: { id: "04798eca341290", state: "RAW", type: "WHITE" } }
            - { hbw: "SVR3QA0022", location: "C1", workpiece: { id: "047389ca341291", state: "RAW", type: "BLUE" } }
          ts: "2025-08-19T09:13:34.583Z"
