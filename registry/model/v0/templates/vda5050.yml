version: 1.0.0
category: VDA5050
notes: "VDA5050 Standard Templates f√ºr APS-Integration"

templates:
  module.order:
    direction: bidirectional
    description: "VDA5050 Order Message"
    schema:
      type: object
      required: ["orderId", "orderUpdateId", "timestamp", "version", "nodes", "edges"]
      properties:
        orderId:
          type: string
          description: "Unique order identifier"
          example: "order_2025-09-19_001"
        orderUpdateId:
          type: integer
          description: "Order update counter"
          example: 0
        timestamp:
          type: string
          format: date-time
          description: "Order timestamp"
          example: "2025-09-19T10:30:00Z"
        version:
          type: string
          description: "VDA5050 version"
          example: "2.0.0"
        nodes:
          type: array
          description: "Order nodes"
          items:
            type: object
            required: ["nodeId", "sequenceId", "released"]
            properties:
              nodeId:
                type: string
                description: "Node identifier"
                example: "node_001"
              sequenceId:
                type: integer
                description: "Node sequence"
                example: 0
              released:
                type: boolean
                description: "Node released"
                example: true
              nodeDescription:
                type: string
                description: "Node description"
                example: "Storage position A1"
              nodePosition:
                type: object
                properties:
                  x:
                    type: number
                    example: 1.0
                  y:
                    type: number
                    example: 2.0
                  theta:
                    type: number
                    example: 0.0
              actions:
                type: array
                description: "Node actions"
                items:
                  type: object
                  required: ["actionId", "actionType"]
                  properties:
                    actionId:
                      type: string
                      example: "action_001"
                    actionType:
                      type: string
                      example: "store"
                    parameters:
                      type: object
                      properties:
                        color:
                          type: string
                          example: "RED"
                        workpieceId:
                          type: string
                          example: "WP_001"
        edges:
          type: array
          description: "Order edges"
          items:
            type: object
            required: ["edgeId", "sequenceId", "released"]
            properties:
              edgeId:
                type: string
                example: "edge_001"
              sequenceId:
                type: integer
                example: 0
              released:
                type: boolean
                example: true
              edgeDescription:
                type: string
                example: "Transport from A1 to B1"
              startNodeId:
                type: string
                example: "node_001"
              endNodeId:
                type: string
                example: "node_002"
              actions:
                type: array
                items:
                  type: object
                  required: ["actionId", "actionType"]
                  properties:
                    actionId:
                      type: string
                      example: "action_002"
                    actionType:
                      type: string
                      example: "transport"
                    parameters:
                      type: object
                      properties:
                        speed:
                          type: number
                          example: 0.5
                        precision:
                          type: number
                          example: 0.1

  module.state:
    direction: inbound
    description: "VDA5050 State Message"
    schema:
      type: object
      required: ["orderId", "orderUpdateId", "timestamp", "version", "nodeStates", "edgeStates"]
      properties:
        orderId:
          type: string
          description: "Order identifier"
          example: "order_2025-09-19_001"
        orderUpdateId:
          type: integer
          description: "Order update counter"
          example: 0
        timestamp:
          type: string
          format: date-time
          description: "State timestamp"
          example: "2025-09-19T10:30:00Z"
        version:
          type: string
          description: "VDA5050 version"
          example: "2.0.0"
        nodeStates:
          type: array
          description: "Node states"
          items:
            type: object
            required: ["nodeId", "sequenceId", "nodeState"]
            properties:
              nodeId:
                type: string
                example: "node_001"
              sequenceId:
                type: integer
                example: 0
              nodeState:
                type: string
                enum: ["WAITING", "RUNNING", "FINISHED", "FAILED"]
                example: "RUNNING"
              nodeDescription:
                type: string
                example: "Storage position A1"
              nodePosition:
                type: object
                properties:
                  x:
                    type: number
                    example: 1.0
                  y:
                    type: number
                    example: 2.0
                  theta:
                    type: number
                    example: 0.0
              actionStates:
                type: array
                items:
                  type: object
                  required: ["actionId", "actionState"]
                  properties:
                    actionId:
                      type: string
                      example: "action_001"
                    actionState:
                      type: string
                      enum: ["WAITING", "RUNNING", "FINISHED", "FAILED"]
                      example: "RUNNING"
                    resultDescription:
                      type: string
                      example: "Action completed successfully"
        edgeStates:
          type: array
          description: "Edge states"
          items:
            type: object
            required: ["edgeId", "sequenceId", "edgeState"]
            properties:
              edgeId:
                type: string
                example: "edge_001"
              sequenceId:
                type: integer
                example: 0
              edgeState:
                type: string
                enum: ["WAITING", "RUNNING", "FINISHED", "FAILED"]
                example: "RUNNING"
              edgeDescription:
                type: string
                example: "Transport from A1 to B1"
              actionStates:
                type: array
                items:
                  type: object
                  required: ["actionId", "actionState"]
                  properties:
                    actionId:
                      type: string
                      example: "action_002"
                    actionState:
                      type: string
                      enum: ["WAITING", "RUNNING", "FINISHED", "FAILED"]
                      example: "RUNNING"
                    resultDescription:
                      type: string
                      example: "Transport completed"

  module.instantaction:
    direction: bidirectional
    description: "VDA5050 Instant Action Message"
    schema:
      type: object
      required: ["instantActions"]
      properties:
        instantActions:
          type: array
          description: "Instant actions"
          items:
            type: object
            required: ["actionId", "actionType"]
            properties:
              actionId:
                type: string
                description: "Action identifier"
                example: "instant_action_001"
              actionType:
                type: string
                description: "Action type"
                example: "camera_adjustment"
              parameters:
                type: object
                description: "Action parameters"
                properties:
                  direction:
                    type: string
                    enum: ["up", "down", "left", "right"]
                    example: "up"
                  angle:
                    type: number
                    example: 10
                  color:
                    type: string
                    example: "RED"
                  workpieceId:
                    type: string
                    example: "WP_001"
              blockingType:
                type: string
                enum: ["NONE", "SOFT", "HARD"]
                example: "NONE"
              actionDescription:
                type: string
                example: "Camera adjustment up 10 degrees"

  module.factsheet:
    direction: inbound
    description: "Module Factsheet Message"
    schema:
      type: object
      required: ["moduleId", "moduleType", "version", "timestamp"]
      properties:
        moduleId:
          type: string
          description: "Module identifier"
          example: "SVR4H73275"
        moduleType:
          type: string
          description: "Module type"
          example: "DPS"
        version:
          type: string
          description: "Module version"
          example: "1.0.0"
        timestamp:
          type: string
          format: date-time
          description: "Factsheet timestamp"
          example: "2025-09-19T10:30:00Z"
        capabilities:
          type: array
          description: "Module capabilities"
          items:
            type: string
          example: ["warehouse", "nfc", "camera"]
        position:
          type: object
          description: "Module position"
          properties:
            x:
              type: number
              example: 0.0
            y:
              type: number
              example: 0.0
            theta:
              type: number
              example: 0.0
        dimensions:
          type: object
          description: "Module dimensions"
          properties:
            length:
              type: number
              example: 1.0
            width:
              type: number
              example: 1.0
            height:
              type: number
              example: 0.5
        supportedActions:
          type: array
          description: "Supported actions"
          items:
            type: string
          example: ["store", "retrieve", "nfc_read", "camera_capture"]

  ccu.control:
    direction: outbound
    description: "CCU Control Command"
    schema:
      type: object
      required: ["command", "timestamp"]
      properties:
        command:
          type: string
          description: "Control command"
          example: "reset"
        timestamp:
          type: string
          format: date-time
          description: "Command timestamp"
          example: "2025-09-19T10:30:00Z"
        parameters:
          type: object
          description: "Command parameters"
          properties:
            charge:
              type: boolean
              example: true
            layout:
              type: string
              example: "default"
            flows:
              type: array
              items:
                type: string
              example: ["flow1", "flow2"]
            calibration:
              type: boolean
              example: true
            park:
              type: boolean
              example: false
