version: 1.0.0
metadata:
  category: CCU
  sub_category: State
  description: CCU Status State (topic-free; topics live in mapping.yml)
  icon: "ðŸ“Š"
  last_updated: "2025-09-14"

templates:

  ccu.state.status:
    description: Aktueller CCU-Status
    match:
      required_fields: [systemStatus, timestamp]
    template_structure:
      activeOrders: { type: integer, minimum: 0 }
      availableWorkpieces:
        type: array
        items:
          type: object
          properties:
            position: { type: string }
            type: { type: string, enum: ["RED","WHITE","BLUE"] }
            workpieceId: { type: string }   # NFC Code
      errorMessages:
        type: array
        items: { type: string }
      systemStatus: { type: string, enum: ["RUNNING","STOPPED","ERROR","MAINTENANCE"] }
      timestamp: { type: string, format: date-time }
    examples:
      - payload:
          activeOrders: 2
          availableWorkpieces:
            - { position: "A1", type: "RED", workpieceId: "040a8dca341291" }
          systemStatus: RUNNING
          timestamp: "2025-08-27T10:30:00.123Z"
      - payload:
          activeOrders: 0
          errorMessages: ["Maintenance mode activated"]
          systemStatus: MAINTENANCE
          timestamp: "2025-08-27T10:30:00.123Z"
