# UC-06 Implementation Status

**Erstellt:** 21.01.2026  
**Status:** âœ… Phase 1 & Phase 2 (Step-Animation) abgeschlossen

---

## âœ… Abgeschlossene Implementierung

### Phase 1: Statische Implementierung (MVP)

#### 1.1 Route âœ…
- Route `dsp/use-case/interoperability` erstellt
- Position: Nach `dsp/use-case/track-trace`

#### 1.2 Komponente âœ…
- `InteroperabilityUseCaseComponent` erstellt
- Standalone Component mit `CommonModule`
- Verwendet `Uc06SvgGeneratorService` und `Uc06I18nService`
- Inline SVG-Rendering mit `DomSanitizer`

#### 1.3 Template âœ…
- Header mit Icon und Beschreibung
- SVG-Container mit Loading-Indicator
- Inline SVG-Rendering (`[innerHTML]`)

#### 1.4 Styles âœ…
- Responsive Design (`max-width: 100%`)
- ViewBox: `1920x1300` (erweitert von 1080)
- Konsistent mit anderen Use-Case-Seiten

#### 1.5 SVG-Generierung âœ…
**WICHTIG:** Abweichung vom ursprÃ¼nglichen Plan!

**Geplant:** Statische SVG-Dateien laden (DE/EN)  
**Umsetzung:** Dynamische SVG-Generierung aus Struktur-Konfiguration

**Struktur:**
- `uc-06-structure.config.ts` - Hierarchische Struktur (Columns â†’ Lanes â†’ Chips)
- `uc-06-svg-generator.service.ts` - SVG-Generator Service
- `uc-06-svg-generator-enhanced.service.ts` - Enhanced-Version fÃ¼r EN (optische Verbesserungen)
- `uc-06-i18n.service.ts` - I18n-Loader Service

**Vorteile:**
- âœ… Einheitliche I18n-UnterstÃ¼tzung (DE/EN/FR) ohne separate SVG-Dateien
- âœ… Wartbare Struktur-Datei
- âœ… Automatische Layout-Berechnung (gleichmÃ¤ÃŸige Spacing-Verteilung)
- âœ… Einfache Anpassungen (Farben, AbstÃ¤nde, etc.)

#### 1.6 I18n Keys âœ…
- Alle Keys in `messages.de.json` hinzugefÃ¼gt
- Alle Keys in `messages.en.json` hinzugefÃ¼gt (via Fallback in Service)
- Keys in `public/locale/` kopiert
- Struktur: `@@uc06.*` â†’ `uc06.*` (intern)

#### 1.7 Settings-Tab Link âœ…
- Link in `settings-tab.component.ts` hinzugefÃ¼gt
- Route: `/dsp/use-case/interoperability`

---

## ğŸ¨ Design-Anpassungen

### Farben (ORBIS-CI)
- âš ï¸ **TODO:** Aktuell noch Hex-Codes direkt verwendet (`#154194`, `#7fbf7a`, etc.)
- âœ… **SOLL:** CSS-Variablen aus ORBIS-CI Palette (`var(--orbis-blue-strong)`)
- âœ… **SOLL:** In TypeScript: `ORBIS_COLORS.orbisBlue.strong` aus `color-palette.ts`
- ğŸ“ **Referenz:** `docs/03-decision-records/14-orbis-ci-usage.md`
- ğŸ“ **Zentrale Palette:** `osf/apps/osf-ui/src/app/assets/color-palette.ts` und `_color-palette.scss`

### SVG-GrÃ¶ÃŸen
- âœ… ViewBox: `1920x1300` (erweitert fÃ¼r bessere Darstellung)
- âœ… Responsive: `width: 100%`, `height: auto`
- âœ… Min-Breite: ~800px

### Icons
- âœ… Alle Icons aus `icon-registry.ts` verwendet
- âœ… Asset-Pfade mit `getAssetPath()` aufgelÃ¶st
- âœ… Icons in Chips, Lanes, Timeline integriert

**Neue Icons hinzugefÃ¼gt:**
- `customer.svg` â†’ Customer-Chip
- `bp-system.svg` â†’ Operation-Chip (Business Context)
- `process.svg` â†’ Routing-Chip
- `temperature-sensor.svg`, `vibration-sensor.svg`, `pressure-sensor.svg` â†’ Sensor-Chips
- `battery.svg` â†’ Energy-Chip

---

## ğŸ”§ Spezielle Features implementiert

### 1. Operation-Chip mit Icons
- âœ… Mehrzeiliger Text mit Icons pro Zeile
- âœ… Relative Icon-Positionierung (`offsetX`, `offsetY`)
- âœ… Icons: `driving-status` (Start), `stopped-status` (Stop)

### 2. State-Chip mit Status-Dots
- âœ… Ãœberschrift + Status-Dots mit Labels
- âœ… Farben: Green (Running), Orange (Idle), Red (Fail)
- âœ… EinrÃ¼ckung: 20px fÃ¼r Dots und Labels

### 3. Badges (Quality-Chip)
- âœ… Pass/Fail Badges mit farbigen HintergrÃ¼nden
- âœ… CSS-Klassen: `badgePass`, `badgeFail`

### 4. DSP-Column Pfeile
- âœ… Nur Dreiecks-Pfeilspitzen (ohne Schaft)
- âœ… Abstand: 5px oben und unten zu Lanes
- âœ… GrÃ¶ÃŸe: Nutzt volle verfÃ¼gbare HÃ¶he
- âœ… Basisbreite: 1.4x der HÃ¶he

### 5. Layout-Berechnung
- âœ… Dynamische Lane-Positionierung
- âœ… GleichmÃ¤ÃŸige Spacing-Verteilung
- âœ… Automatische Chip-Positionierung relativ zu Lanes

---

## ğŸ“Š Unterschiede zur ursprÃ¼nglichen Planung

### Abweichungen:

1. **Dynamische SVG-Generierung**
   - **Geplant:** Statische SVG-Dateien (`uc-06-event-to-process-map-DE.svg`, `uc-06-event-to-process-map-EN.svg`)
   - **Umsetzung:** Dynamische Generierung aus TypeScript-Struktur
   - **Grund:** Bessere I18n-UnterstÃ¼tzung, Wartbarkeit

2. **Struktur-Datei**
   - **Geplant:** SVG-Dateien manuell anpassen
   - **Umsetzung:** `uc-06-structure.config.ts` mit hierarchischer Struktur
   - **Grund:** Einheitliche Positionierung, einfache Anpassungen

3. **I18n-Service**
   - **Geplant:** `EnvironmentService` fÃ¼r Locale
   - **Umsetzung:** Eigener `Uc06I18nService` fÃ¼r UC-spezifische Texte
   - **Grund:** Bessere Trennung, Filterung nach UC-Keys

4. **Enhanced-Version**
   - **Neu:** `Uc06SvgGeneratorEnhancedService` fÃ¼r EN-Version
   - **Features:** Subtile Schatten, weichere Farben, grÃ¶ÃŸere Border-Radius
   - **Grund:** Optische Verbesserungen ohne DE-Version zu beeinflussen

5. **Icon-Positionierung**
   - **Geplant:** Absolute Positionen in SVG
   - **Umsetzung:** Relative Offsets (`offsetX`, `offsetY`) fÃ¼r Operation-Icons
   - **Grund:** Bessere Steuerbarkeit

6. **Rounded Corners**
   - **Neu:** Alle Rechtecke mit `rx`/`ry` Attributen
   - **Werte:** Columns (18-20px), Lanes (14px), Chips (12px)

---

## âœ… Phase 2: Step-Animation (Abgeschlossen)

### Implementierte Features:
- âœ… Steps-Definition geladen aus `uc-06-event-to-process-map.steps.json`
- âœ… SVG-IDs fÃ¼r Animation implementiert (`uc06_*`)
- âœ… Step-State Management mit `currentStepIndex`
- âœ… CSS-Klassen fÃ¼r Highlight/Dim/Hidden (`.hl`, `.dim`, `.hidden`)
- âœ… Animation-Controls UI (Prev/Next, Auto-Play, Loop, Step-Dots, Zoom)
- âœ… Step-Description Overlay (ersetzt Subtitle ab Step 1)
- âœ… Zoom-FunktionalitÃ¤t (0.4x - 1.8x)

### Step-Description Box:
- âœ… Position: Innerhalb des SVG-Bereichs (y: 155, nutzt Subtitle-Platz)
- âœ… GrÃ¶ÃŸe: 1400px Breite Ã— 100px HÃ¶he (reduzierte Breite, erhÃ¶hte HÃ¶he)
- âœ… Font-GrÃ¶ÃŸen: Titel 24px, Text 16px
- âœ… Hintergrund: ORBIS-CI Highlight-Green mit 95% Opacity
- âœ… Sichtbarkeit: Versteckt in Step 0, sichtbar ab Step 1

### Layout-Anpassungen:
- âœ… Sources Column: Header-Position innerhalb der Column (headerY: 320)
- âœ… DSP Column: Normalize-Step nach oben verschoben (y: 400) fÃ¼r sichtbare Pfeile
- âœ… Process View Box: WeiÃŸer Hintergrund statt grÃ¼n
- âœ… Subtitle-Text aktualisiert: "Turn shopfloor events into a process-ready view through normalization and context."
- âœ… Alle y-Koordinaten konsistent angepasst (+80px fÃ¼r Column-Verschiebung)

**Referenz:**
- `osf/apps/osf-ui/src/app/components/dsp-animation/dsp-animation.component.ts`
- `docs/assets/use-cases/uc-06/uc-06-event-to-process-map.steps.json`

---

## ğŸ“ Aktuelle Datei-Struktur

```
osf/apps/osf-ui/src/app/pages/use-cases/interoperability/
â”œâ”€â”€ interoperability-use-case.component.ts
â”œâ”€â”€ interoperability-use-case.component.html
â”œâ”€â”€ interoperability-use-case.component.scss
â”œâ”€â”€ uc-06-structure.config.ts          # Struktur-Definition
â”œâ”€â”€ uc-06-svg-generator.service.ts     # Standard SVG-Generator
â”œâ”€â”€ uc-06-svg-generator-enhanced.service.ts  # Enhanced fÃ¼r EN
â””â”€â”€ uc-06-i18n.service.ts              # I18n-Loader
```

---

## ğŸ¯ NÃ¤chste Schritte

1. âœ… Phase 1 abgeschlossen
2. âœ… Phase 2: Step-Animation implementiert
3. â³ Weitere Use-Cases implementieren (UC-07, UC-08, etc.)

---

*Letzte Aktualisierung: 21.01.2026*
