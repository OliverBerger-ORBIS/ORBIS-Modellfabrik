stateDiagram-v2
    [*] --> IDLE

    %% MILL Module Status Transitions
    IDLE -->|PICK Command| PICKBUSY
    PICKBUSY -->|PICK Complete| WAITING_AFTER_PICK
    WAITING_AFTER_PICK -->|MILL Command| MILLBUSY
    MILLBUSY -->|MILL Complete| WAITING_AFTER_MILL
    WAITING_AFTER_MILL -->|DROP Command| DROPBUSY
    DROPBUSY -->|DROP Complete| IDLE

    %% Error States
    PICKBUSY -->|Error| FAILED
    MILLBUSY -->|Error| FAILED
    DROPBUSY -->|Error| FAILED
    FAILED -->|Reset| IDLE

    %% Calibration
    IDLE -->|Calibration| CALIBRATION
    CALIBRATION -->|Complete| IDLE