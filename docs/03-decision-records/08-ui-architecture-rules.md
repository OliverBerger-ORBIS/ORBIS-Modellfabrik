# UI Architecture Rules - Cursor AI Regeln

## ğŸ¯ ZENTRALE UI-ARCHITEKTUR-REGELN

### Logging-Standards (KRITISCH)
- **Logger verwenden:** `logger.debug("message")` statt `st.debug("message")` âœ…
- **Logger importieren:** `from omf2.common.logger import get_logger` âœ…
- **Logger initialisieren:** `logger = get_logger(__name__)` âœ…
- **KEINE st.debug:** `st.debug()` âŒ
- **Logging-Level:** `logger.info()`, `logger.error()`, `logger.warning()`, `logger.debug()` âœ…

### Tab/Subtab-Architektur (KRITISCH)
- **Maximale DateigrÃ¶ÃŸe:** 200 Zeilen pro Tab/Subtab-Datei âœ…
- **Modulare Komponenten:** Komplexe Logik in separate Components auslagern âœ…
- **Components-Verzeichnis:** `omf2/ui/common/components/` fÃ¼r wiederverwendbare UI-Komponenten âœ…
- **Domain-spezifische Components:** Nur in `omf2/ui/admin/` wenn ausschlieÃŸlich Admin-spezifisch âœ…
- **Single Responsibility:** Jede Komponente hat einen klaren Zweck âœ…

### Tab-Struktur-Standards (KRITISCH)
- **Tab-Dateien:** `*_tab.py` (z.B. `generic_steering_tab.py`) âœ…
- **Subtab-Dateien:** `*_subtab.py` (z.B. `topic_steering_subtab.py`) âœ…
- **Component-Dateien:** `*_component.py` oder `*_generator.py` (z.B. `payload_generator.py`) âœ…
- **Maximale Zeilen:** 200 Zeilen pro Datei âœ…
- **Bei Ãœberschreitung:** Sofort in Components aufteilen âœ…

### Component-Architektur (KRITISCH)
- **Wiederverwendbare Components:** `omf2/ui/common/components/` âœ…
- **Domain-spezifische Components:** `omf2/ui/admin/components/` oder `omf2/ui/user/components/` âœ…
- **Component-Imports:** Absolute Pfade verwenden âœ…
- **Component-Initialisierung:** Im Tab/Subtab, nicht in Component âœ…
- **Component-Dependencies:** Minimale AbhÃ¤ngigkeiten zwischen Components âœ…

### Import-Standards fÃ¼r UI (KRITISCH)
- **Absolute Imports:** `from omf2.ui.common.components.payload_generator import PayloadGenerator` âœ…
- **Registry Manager:** `from omf2.registry.manager.registry_manager import get_registry_manager` âœ…
- **Logger:** `from omf2.common.logger import get_logger` âœ…
- **Streamlit:** `import streamlit as st` âœ…
- **KEINE relativen Imports:** `from .component import Component` âŒ

### Function-Signature-Standards (KRITISCH)
- **Tab-Functions:** `render_*_tab()` âœ…
- **Subtab-Functions:** `render_*_subtab(admin_gateway=None, registry_manager=None)` âœ…
- **Component-Functions:** `__init__(registry_manager)` oder `__init__(admin_gateway, registry_manager)` âœ…
- **Parameter-Weitergabe:** Immer `admin_gateway` und `registry_manager` als Parameter âœ…
- **Session State:** Nur als Fallback, nicht als primÃ¤re Datenquelle âœ…

### Error-Handling-Standards (KRITISCH)
- **Try-Catch:** Alle UI-Functions mit try-catch umschlieÃŸen âœ…
- **Logger-Errors:** `logger.error(f"âŒ Error: {e}")` âœ…
- **User-Feedback:** `st.error(f"âŒ User-friendly message")` âœ…
- **Graceful Degradation:** UI funktioniert auch bei Fehlern âœ…
- **Debug-Info:** `logger.debug()` statt `st.debug()` âœ…

### UI-Refresh-Standards (KRITISCH)
- **Session State:** FÃ¼r persistente UI-ZustÃ¤nde âœ…
- **Key-Uniqueness:** Einzigartige Keys fÃ¼r alle UI-Elemente âœ…
- **Key-Pattern:** `{tab}_{subtab}_{component}_{element}` âœ…
- **Radio Buttons:** Statt Selectbox fÃ¼r bessere UX âœ…
- **State-Persistence:** UI-Zustand bleibt bei Reruns erhalten âœ…

### Performance-Standards (KRITISCH)
- **Lazy Loading:** Components nur bei Bedarf laden âœ…
- **Caching:** Registry Manager in Session State cachen âœ…
- **Minimale Reruns:** UI-Ã„nderungen minimieren âœ…
- **Efficient Rendering:** Nur notwendige UI-Elemente rendern âœ…
- **Background Processing:** Schwere Operationen im Hintergrund âœ…

## ğŸš¨ AUTOMATISCHE REGEL-BEFOLGUNG (KRITISCH)

### MANDATORY COMPLIANCE
- **JEDE UI-Ã„nderung** MUSS diese Regeln automatisch befolgen
- **KEINE Ausnahmen** ohne explizite User-Freigabe
- **Immer prÃ¼fen** vor jeder UI-Implementierung:
  - âœ… Logger statt st.debug verwendet?
  - âœ… DateigrÃ¶ÃŸe unter 200 Zeilen?
  - âœ… Components in ui/common/ fÃ¼r Wiederverwendung?
  - âœ… Absolute Imports verwendet?
  - âœ… Function-Signature korrekt?
  - âœ… Error-Handling implementiert?

### AUTOMATISCHE VALIDIERUNG
- **Vor jeder UI-Implementierung:** Regeln prÃ¼fen
- **Nach jeder Ã„nderung:** Linting/Formatting prÃ¼fen
- **Bei Fehlern:** Sofort korrigieren, nicht ignorieren
- **Bei Ãœberschreitung:** Sofort refactoren

### ENTWICKLUNGSPROZESS (MANDATORY)
1. **Analyse:** UI-Anforderungen verstehen
2. **Regel-Check:** Alle relevanten Regeln prÃ¼fen
3. **Implementierung:** Regeln automatisch befolgen
4. **Validierung:** Pre-commit Hooks, Tests, Linting
5. **Freigabe:** User-BestÃ¤tigung vor Commit

### ZWINGENDE REGELN (NIEMALS IGNORIEREN)
- **Logging:** `logger.debug()` statt `st.debug()`
- **DateigrÃ¶ÃŸe:** Maximal 200 Zeilen pro Tab/Subtab
- **Components:** Wiederverwendbare in `ui/common/`
- **Imports:** Absolute Pfade fÃ¼r alle UI-Imports
- **Function-Signature:** Korrekte Parameter fÃ¼r alle UI-Functions
- **Error-Handling:** Try-catch fÃ¼r alle UI-Functions

## ğŸš¨ WICHTIG
Bei jeder UI-Ã„nderung diese Regeln befolgen!
